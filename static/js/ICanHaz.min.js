(function(){var j="undefined"!==typeof module&&module.exports||{};(function(b){function c(a){return(""+a).replace(/&(?!\w+;)|[<>"']/g,function(a){return G[a]||a})}function m(a,d,b,e){for(var e=e||"<template>",i=d.split("\n"),f=Math.max(b-3,0),h=Math.min(i.length,b+3),i=i.slice(f,h),c=0,g=i.length;c<g;++c)h=c+f+1,i[c]=(h===b?" >> ":"    ")+i[c];a.template=d;a.line=b;a.file=e;a.message=[e+":"+b,i.join("\n"),"",a.message].join("\n");return a}function g(a,d,b){if("."===a)return d[d.length-1];for(var a=
a.split("."),e=a.length-1,c=a[e],f,h,g=d.length,o,m;g;){m=d.slice(0);h=d[--g];for(o=0;o<e;){h=h[a[o++]];if(null==h)break;m.push(h)}if(h&&c in h){f=h[c];break}}"function"===typeof f&&(f=f.call(m[m.length-1]));return null==f&&!b?"":f}function z(a,d,b,e,c){d=g(d,e,!0);if(c)(null==d||!1===d||v(d)&&0===d.length)&&a(b());else if(v(d))A(d,function(d){e.push(d);a(b());e.pop()});else if("object"===typeof d)e.push(d),a(b()),e.pop();else if("function"===typeof d){var f=e[e.length-1];a(d.call(f,b(),function(a){return r(a,
f)})||"")}else d&&a(b())}function B(a,d){for(var d=d||{},c=d.tags||b.tags,e=c[0],i=c[c.length-1],f=["var line = 1;","\ntry {",'\nsend("'],h=[],g=!1,o=!1,z=function(){if(g&&!o&&!d.space)for(;h.length;)f.splice(h.pop(),1);else h=[];o=g=!1},s=[],j,p,r,B=function(a){c=t(a).split(/\s+/);p=c[0];r=c[c.length-1]},w=function(a){f.push('");',j,'\nvar partial = partials["'+t(a)+'"];',"\nif (partial) {","\n  send(render(partial, stack[stack.length - 1], partials));","\n}",'\nsend("')},v=function(b,c){var e=t(b);
if(""===e)throw m(Error("Section name may not be empty"),a,u,d.file);s.push({name:e,inverted:c});f.push('");',j,'\nvar name = "'+e+'";',"\nvar callback = (function () {","\n  var buffer, send = function (chunk) { buffer.push(chunk); };","\n  return function () {","\n    buffer = [];",'\nsend("')},x=function(a){v(a,!0)},y=function(d){var d=t(d),b=0!=s.length&&s[s.length-1].name;if(!b||d!=b)throw m(Error('Section named "'+d+'" was never opened'),a,u,file);d=s.pop();f.push('");','\n    return buffer.join("");',
"\n  };","\n})();");d.inverted?f.push("\nsendSection(send,name,callback,stack,true);"):f.push("\nsendSection(send,name,callback,stack);");f.push('\nsend("')},A=function(a){f.push('");',j,'\nsend(findName("'+t(a)+'", stack));','\nsend("')},C=function(a){f.push('");',j,'\nsend(escapeHTML(findName("'+t(a)+'", stack)));','\nsend("')},u=1,q,n,k=0,D=a.length;k<D;++k)if(a.slice(k,k+e.length)===e){k+=e.length;q=a.substr(k,1);j="\nline = "+u+";";p=e;r=i;g=!0;switch(q){case "!":k++;n=null;break;case "=":k++;
i="="+i;n=B;break;case ">":k++;n=w;break;case "#":k++;n=v;break;case "^":k++;n=x;break;case "/":k++;n=y;break;case "{":i="}"+i;case "&":k++;o=!0;n=A;break;default:o=!0,n=C}q=a.indexOf(i,k);if(-1===q)throw m(Error('Tag "'+e+'" was not closed properly'),a,u,d.file);e=a.substring(k,q);n&&n(e);for(n=0;~(n=e.indexOf("\n",n));)u++,n++;k=q+i.length-1;e=p;i=r}else switch(q=a.substr(k,1),q){case '"':case "\\":o=!0;f.push("\\"+q);break;case "\n":h.push(f.length);f.push("\\n");z();u++;break;default:E.test(q)?
h.push(f.length):o=!0,f.push(q)}if(0!=s.length)throw m(Error('Section "'+s[s.length-1].name+'" was not closed properly'),a,u,d.file);z();f.push('");',"\nsend(null);","\n} catch (e) { throw {error: e, line: line}; }");i=f.join("").replace(/send\(""\);\n/g,"");d.debug&&("undefined"!=typeof console&&console.log?console.log(i):"function"===typeof print&&print(i));return i}function p(a,d){var b=B(a,d),e=new Function("view,partials,send,stack,findName,escapeHTML,sendSection,render",b);return function(b,
f,h){"function"===typeof f&&(h=f,f={});var f=f||{},j=[],o=[b];try{e(b,f,h||function(a){j.push(a)},o,g,c,z,r)}catch(p){throw m(p.error,a,p.line,d.file);}return j.join("")}}function j(a,d){d=d||{};return!1!==d.cache?(w[a]||(w[a]=p(a,d)),w[a]):p(a,d)}function r(a,d,b,c){return j(a)(d,b,c)}b.name="mustache.js";b.version="0.5.0-dev";b.tags=["{{","}}"];b.parse=B;b.compile=j;b.render=r;b.clearCache=function(){w={}};b.to_html=r;var H=Object.prototype.toString,C=Array.isArray,D=Array.prototype.forEach,F=String.prototype.trim,
v;v=C?C:function(a){return"[object Array]"===H.call(a)};var A;A=D?function(a,b,c){return D.call(a,b,c)}:function(a,b,c){for(var e=0,g=a.length;e<g;++e)b.call(c,a[e],e,a)};var E=/^\s*$/,t;if(F)t=function(a){return null==a?"":F.call(a)};else{var x,y;E.test("\u00a0")?(x=/^\s+/,y=/\s+$/):(x=/^[\s\xA0]+/,y=/[\s\xA0]+$/);t=function(a){return null==a?"":(""+a).replace(x,"").replace(y,"")}}var G={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},w={}})(j);(function(){var b={VERSION:"0.10",templates:{},
$:"undefined"!==typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(c,m){if("object"===typeof c)for(var g in c)this.addTemplate(g,c[g]);else b[c]?console.error("Invalid name: "+c+"."):b.templates[c]?console.error('Template "'+c+'  " exists'):(b.templates[c]=m,b[c]=function(g,m){var g=g||{},p=j.to_html(b.templates[c],g,b.templates);return b.$&&!m?b.$(p):p})},clearAll:function(){for(var c in b.templates)delete b[c];b.templates={}},refresh:function(){b.clearAll();b.grabTemplates()},
grabTemplates:function(){var c,m=document.getElementsByTagName("script"),g,j=[];for(c=0,l=m.length;c<l;c++)if((g=m[c])&&g.innerHTML&&g.id&&("text/html"===g.type||"text/x-icanhaz"===g.type))b.addTemplate(g.id,"".trim?g.innerHTML.trim():g.innerHTML.replace(/^\s+/,"").replace(/\s+$/,"")),j.unshift(g);for(c=0,l=j.length;c<l;c++)j[c].parentNode.removeChild(j[c])}};"undefined"!==typeof require?module.exports=b:window.ich=b;"undefined"!==typeof document&&(b.$?b.$(function(){b.grabTemplates()}):document.addEventListener("DOMContentLoaded",
function(){b.grabTemplates()},!0))})()})();
